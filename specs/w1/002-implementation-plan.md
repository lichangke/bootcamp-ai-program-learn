# Project Alpha 详细实时实施计划

**文档版本**: v1.0  
**创建日期**: 2026-02-14  
**关联文档**: `specs/w1/001-spec.md`  
**代码根目录**: `./w1/project-alpha`

## 1. 计划目标

在 `./w1/project-alpha` 下完成 Project Alpha 的首版交付，满足 `001-spec.md` 中全部 In Scope 功能与核心非功能指标：

1. Ticket: 创建/编辑/删除/完成/取消完成。
2. Tag: 创建/编辑/删除，并支持与 ticket 关联。
3. 列表: 按标签筛选、按标题搜索、分页。
4. 工程质量: 基础测试、统一错误结构、可运行部署说明。

## 2. 执行原则（实时计划）

1. 小步快跑，每日可验证: 每天必须有可演示增量。
2. 先后端契约，再前端联调: 先固定 API，再接 UI。
3. 每天两次状态刷新:
   - 午间检查点（12:00）
   - 收工检查点（18:00）
4. 红线触发即时调整:
   - 当日关键任务延期超过 4 小时，立即降级非核心项并重排计划。
   - 关键阻塞（数据库、接口不稳定）超过 2 小时，立即切换到 mock/并行任务。

## 3. 目录与里程碑产物映射

```text
./w1/project-alpha/
  backend/                  # FastAPI 后端
  frontend/                 # Vite + React + Tailwind + shadcn 前端
  tests/                    # 跨层集成/E2E 或共享测试资源
  docs/                     # 运行说明、接口说明（可选）
```

对应产物:

1. 后端产物在 `./w1/project-alpha/backend`。
2. 前端产物在 `./w1/project-alpha/frontend`。
3. 测试与验收脚本在 `./w1/project-alpha/tests`。
4. 计划追踪记录建议放 `./w1/project-alpha/docs/progress-log.md`。

## 4. 总体排期（建议 8 个工作日）

说明: 以下日期按 2026-02-16（周一）启动计算，可按实际启动日顺延。

1. Day 1（2026-02-16）: 项目初始化与开发基线。
2. Day 2（2026-02-17）: 数据模型与数据库迁移。
3. Day 3（2026-02-18）: Ticket API 全量完成。
4. Day 4（2026-02-19）: Tag API + 列表筛选搜索分页 API。
5. Day 5（2026-02-20）: 前端核心页面与 API 对接。
6. Day 6（2026-02-23）: 前端交互完善 + 错误态/空态处理。
7. Day 7（2026-02-24）: 测试补齐、性能验证、缺陷修复。
8. Day 8（2026-02-25）: 验收、文档冻结、交付。

## 5. 分日详细执行计划

## Day 1（2026-02-16）项目初始化

目标: 可启动的前后端空骨架，统一编码规范，完成环境连通。

任务清单:

1. 初始化后端骨架（FastAPI 分层目录）。
2. 初始化前端骨架（Vite + TypeScript + Tailwind + shadcn/ui）。
3. 建立基础配置:
   - `.env.example`
   - 统一 lint/format 命令
   - 基础 README（启动命令、依赖说明）
4. 配置 PostgreSQL 本地连接并完成健康检查接口 `GET /api/health`。

交付物:

1. `./w1/project-alpha/backend` 可启动并返回健康检查结果。
2. `./w1/project-alpha/frontend` 可本地启动并显示占位页面。

完成标准:

1. 前后端均可独立启动。
2. 健康检查接口可从浏览器/命令行访问。

## Day 2（2026-02-17）数据层落地

目标: 完成 tickets/tags/ticket_tags 表结构与迁移策略。

任务清单:

1. 建立数据库迁移工具链（如 Alembic）。
2. 创建三张核心表与索引:
   - `tickets`
   - `tags`（`LOWER(name)` 唯一索引）
   - `ticket_tags`
3. 实现 `status`、`completed_at` 相关约束。
4. 完成 Repository 层基础 CRUD。

交付物:

1. 首个迁移脚本可重复执行。
2. Repository 层单元测试雏形。

完成标准:

1. 数据库从空库可一键迁移到最新版本。
2. 标签重名（大小写不敏感）可被数据库层拦截。

## Day 3（2026-02-18）Ticket API

目标: 完成 ticket 核心接口与状态流转规则。

任务清单:

1. 实现接口:
   - `POST /api/tickets`
   - `GET /api/tickets/{ticket_id}`
   - `PUT /api/tickets/{ticket_id}`
   - `DELETE /api/tickets/{ticket_id}`
   - `PATCH /api/tickets/{ticket_id}/complete`
   - `PATCH /api/tickets/{ticket_id}/reopen`
2. 接入统一错误返回结构。
3. 实现 Service 层业务规则:
   - `title` 长度校验
   - 完成/取消完成时 `completed_at` 处理
   - 更新标签采用全量覆盖策略

交付物:

1. Ticket 相关 API 可通过本地调试工具完整调用。
2. Ticket 业务规则单元测试通过。

完成标准:

1. 覆盖用户故事 3.1 的所有验收场景。

## Day 4（2026-02-19）Tag 与列表查询 API

目标: 标签管理、列表筛选搜索分页全部可用。

任务清单:

1. 实现接口:
   - `GET /api/tags`
   - `POST /api/tags`
   - `PUT /api/tags/{tag_id}`
   - `DELETE /api/tags/{tag_id}`
   - `GET /api/tickets`（支持 `tag_id`/`q`/`status`/分页）
2. 确保删除标签触发关联清理（事务一致性）。
3. 标题模糊查询与分页上限（`page_size <= 100`）。

交付物:

1. API 契约稳定版（供前端联调）。
2. Postman/HTTP 示例请求集合（可选）。

完成标准:

1. 覆盖用户故事 3.2、3.3、3.4 的后端能力。
2. 列表查询在 1 万条样本下达到基础性能目标。

## Day 5（2026-02-20）前端主流程

目标: 完成可操作的端到端主路径。

任务清单:

1. 搭建页面结构:
   - `TicketListPage`
   - `TicketEditorDialog`
   - `TagManagerDialog`
2. 接入 TanStack Query:
   - ticket 列表拉取与分页
   - ticket/tag 的增删改 mutation
3. 实现状态切换按钮（完成/取消完成）。

交付物:

1. 前端页面可完成 ticket 与标签基本操作。

完成标准:

1. 从 UI 端可完整走通“创建 ticket -> 打标签 -> 完成 ticket”。

## Day 6（2026-02-23）前端交互完善

目标: 提升可用性并补齐边界交互。

任务清单:

1. 搜索防抖（300ms）与标签筛选联动。
2. 完善 loading、error、empty 三类状态。
3. 删除二次确认、toast 消息统一。
4. 处理接口失败回滚与提示文案。

交付物:

1. UI 交互版本达到可验收状态。

完成标准:

1. 用户关键路径无阻塞，错误提示可读且一致。

## Day 7（2026-02-24）测试与优化

目标: 完成回归测试和关键性能验证。

任务清单:

1. 后端:
   - Service/Repository 单元测试补齐
   - API 集成测试（CRUD + 筛选搜索分页）
2. 前端:
   - 关键组件测试（列表、表单）
   - E2E 冒烟流程
3. 性能检查:
   - 列表查询 P95 目标验证（< 500ms）

交付物:

1. 测试报告与问题清单。
2. 高优先级缺陷修复完成。

完成标准:

1. P1/P2 功能通过回归；阻断级缺陷为 0。

## Day 8（2026-02-25）验收与交付

目标: 完成 DoD 检查并冻结交付版本。

任务清单:

1. 对照 `001-spec.md` 逐项验收。
2. 完成运行文档与接口说明更新。
3. 整理遗留事项（明确是否进入下一期）。

交付物:

1. 可运行版本（本地/测试环境）。
2. 最终验收记录与遗留清单。

完成标准:

1. `001-spec.md` 的 In Scope 全部完成。
2. 关键指标达到预期且文档完整。

## 6. 任务依赖关系（关键路径）

1. Day 1 完成前，Day 2-8 全部阻塞。
2. Day 2 数据模型未稳定，Day 3/4 API 不可稳定开发。
3. Day 4 API 契约未稳定，Day 5/6 前端联调风险极高。
4. Day 7 测试未通过，不进入 Day 8 验收。

关键路径:

1. 项目初始化 -> 数据模型 -> Ticket API -> Tag/列表 API -> 前端主流程 -> 测试回归 -> 验收交付

## 7. 每日实时同步机制

## 7.1 日常节奏

1. 09:30 站会: 确认当天目标、阻塞、依赖。
2. 12:00 中间检查: 更新完成度、风险状态。
3. 18:00 收工检查: 记录当日产出、次日计划。

## 7.2 更新模板（建议）

```md
日期: YYYY-MM-DD
计划任务:
- [ ] 任务 A
- [ ] 任务 B

实际完成:
- 已完成:
- 未完成:

阻塞项:
- 描述:
- 影响:
- 处理人:
- 预计恢复时间:

风险状态:
- 新增风险:
- 已关闭风险:

明日计划:
- 任务 1
- 任务 2
```

## 8. 风险清单与预案

1. 数据库连接或迁移失败
   - 预案: 提前准备本地 Docker PostgreSQL 与初始化脚本；迁移脚本先在空库和脏库各验证一次。
2. 标签唯一性与并发冲突
   - 预案: 依赖数据库唯一索引兜底；应用层捕获冲突并映射统一错误码。
3. 前后端联调进度错位
   - 预案: Day 4 冻结 API 契约；前端在 Day 5 前可使用 mock 数据并行开发。
4. 性能指标不达标
   - 预案: 增加索引、优化 SQL、降低非必要字段返回，必要时增加分页默认限制。
5. 测试覆盖不足导致回归风险
   - 预案: 将 P1/P2 流程纳入强制冒烟清单，不通过不得验收。

## 9. 验收闸门（Go/No-Go）

进入最终交付前必须同时满足:

1. 功能闸门:
   - Ticket 与 Tag 全功能可用。
   - 标签筛选、标题搜索、分页可用。
2. 质量闸门:
   - 阻断级缺陷为 0。
   - 关键测试（后端集成 + 前端冒烟）通过。
3. 性能闸门:
   - 列表查询 P95 达标（目标 < 500ms，测试数据量 1 万条）。
4. 文档闸门:
   - 运行说明与接口说明已更新到最新实现。

## 10. 首周执行检查清单

1. [ ] `./w1/project-alpha/backend` 初始化完成并可启动。
2. [ ] `./w1/project-alpha/frontend` 初始化完成并可启动。
3. [ ] PostgreSQL 迁移工具与首个迁移脚本可执行。
4. [ ] Ticket API 主流程联通。
5. [ ] Tag API 与列表查询能力联通。
6. [ ] 前端完成主流程联调。
7. [ ] 冒烟测试通过并形成验收记录。

