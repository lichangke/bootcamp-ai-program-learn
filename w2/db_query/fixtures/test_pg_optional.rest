@baseUrl = http://127.0.0.1:8000
@apiBase = {{baseUrl}}/api/v1
@dbName = demo_pg
@pgUrl = postgres://postgres:postgres@localhost:5432/postgres

###
# Optional PostgreSQL scenario
# Prerequisite: local PostgreSQL is running and @pgUrl is reachable.

###
# Health check
GET {{baseUrl}}/health
Accept: application/json

###
# List connections
GET {{apiBase}}/dbs
Accept: application/json

###
# Create or update PostgreSQL connection
PUT {{apiBase}}/dbs/{{dbName}}
Content-Type: application/json
Accept: application/json

{
  "url": "{{pgUrl}}"
}

###
# Get PostgreSQL connection with metadata
GET {{apiBase}}/dbs/{{dbName}}
Accept: application/json

###
# Refresh PostgreSQL metadata
POST {{apiBase}}/dbs/{{dbName}}/refresh
Accept: application/json

###
# Execute PostgreSQL SQL query
POST {{apiBase}}/dbs/{{dbName}}/query
Content-Type: application/json
Accept: application/json

{
  "sql": "SELECT 1 AS value"
}

###
# Natural language to PostgreSQL SQL
POST {{apiBase}}/dbs/{{dbName}}/query/natural
Content-Type: application/json
Accept: application/json

{
  "prompt": "show first 10 tables in current database"
}

###
# Delete PostgreSQL connection
DELETE {{apiBase}}/dbs/{{dbName}}
Accept: application/json

###
# Verify deletion
GET {{apiBase}}/dbs/{{dbName}}
Accept: application/json
